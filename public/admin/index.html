<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Panel - Webinar Platform</title>
  <!-- TipTap WYSIWYG Editor -->
  <link href="/assets/lib/tiptap/tiptap.css" rel="stylesheet">
  <link rel="stylesheet" href="/assets/css/admin.css?v=1768678034">
</head>
<body>
  <header>
    <div class="header-branding">
      <h1>‚öôÔ∏è Admin Panel - Webinar Platform</h1>
    </div>
    <nav class="header-nav">
      <button onclick="showSection('webinars')">Webinare</button>
      <button onclick="showSection('results')">Ergebnisse</button>
      <button onclick="showImportModal()" style="background: #27ae60;">üì§ Import (PPTX/PDF)</button>
      <button onclick="showSection('settings')">Einstellungen</button>
      <button onclick="showSection('smtp')">E-Mail (SMTP)</button>
      <button onclick="showHelpModal()" class="btn-help" title="Hilfe">?</button>
      <button onclick="logout()" class="btn-logout">Abmelden</button>
    </nav>
  </header>
  
  <!-- Settings Section -->
  <section id="settings-section" class="content-section">
    <h2>Einstellungen</h2>
    
    <div class="card">
      <h3>Header-Konfiguration</h3>
      <form id="settingsForm">
        <div class="form-group">
          <label for="headerTitle">Header-Titel</label>
          <input type="text" id="headerTitle" name="headerTitle" placeholder="Webinar Platform">
        </div>
        
        <div class="form-group">
          <label for="logoFile">Logo hochladen</label>
          <input type="file" id="logoFile" accept="image/*">
          <div id="currentLogo" class="current-logo"></div>
        </div>
        
        <button type="submit" class="btn btn-primary">Speichern</button>
      </form>
    </div>
  </section>
  
  <!-- SMTP Section -->
  <section id="smtp-section" class="content-section hidden">
    <h2>E-Mail Konfiguration (SMTP)</h2>
    
    <div class="card">
      <form id="smtpForm">
        <div class="form-group">
          <label for="smtpHost">SMTP Host</label>
          <input type="text" id="smtpHost" name="host" placeholder="smtp.example.com" required>
        </div>
        
        <div class="form-group">
          <label for="smtpPort">Port</label>
          <input type="number" id="smtpPort" name="port" value="587" required>
        </div>
        
        <div class="form-group">
          <label for="smtpUsername">Benutzername</label>
          <input type="text" id="smtpUsername" name="username" required>
        </div>
        
        <div class="form-group">
          <label for="smtpPassword">Passwort</label>
          <input type="password" id="smtpPassword" name="password">
          <small>Leer lassen, um bestehendes Passwort zu behalten</small>
        </div>
        
        <div class="form-group">
          <label for="smtpFrom">Absender E-Mail</label>
          <input type="email" id="smtpFrom" name="from" required>
        </div>
        
        <div class="form-group">
          <label for="smtpRecipient">Empf√§nger E-Mail f√ºr Webinar-Ergebnisse</label>
          <input type="email" id="smtpRecipient" name="recipient">
          <small>An diese E-Mail-Adresse werden die Ergebnisse der Webinare gesendet</small>
        </div>
        
        <div class="form-group">
          <label>
            <input type="checkbox" id="smtpSecure" name="secure">
            TLS/SSL verwenden
          </label>
        </div>
        
        <button type="submit" class="btn btn-primary">SMTP Konfiguration speichern</button>
      </form>
      
      <hr>
      
      <h3>Test-E-Mail senden</h3>
      <form id="testEmailForm">
        <div class="form-group">
          <label for="testEmail">Test-Empf√§nger</label>
          <input type="email" id="testEmail" name="recipient" required>
        </div>
        <button type="submit" class="btn btn-secondary">Test-E-Mail senden</button>
      </form>
    </div>
  </section>
  
  <!-- PPTX Section -->
  <section id="pptx-section" class="content-section hidden">
    <h2>Pr√§sentations-Verwaltung (PPTX/PDF)</h2>
    
    <div class="card">
      <h3>PPTX/PDF hochladen</h3>
      <form id="pptxUploadForm">
        <div class="form-group">
          <label for="pptxFile">PPTX- oder PDF-Datei ausw√§hlen</label>
          <input type="file" id="pptxFile" accept=".pptx,.ppt,.pdf" required>
        </div>
        <button type="submit" class="btn btn-primary">Datei hochladen</button>
      </form>
    </div>
    
    <div class="card">
      <h3>Hochgeladene Pr√§sentationen</h3>
      <div id="pptxList"></div>
    </div>
  </section>
  
  <!-- Webinars Section -->
  <section id="webinars-section" class="content-section hidden">
    <h2>Webinar Verwaltung</h2>
    
    <button onclick="showCreateWebinar()" class="btn btn-primary">Neues Webinar erstellen</button>
    
    <div id="webinarList" class="webinar-list"></div>
    
    <!-- Create/Edit Webinar Modal -->
    <div id="webinarModal" class="modal hidden">
      <div class="modal-content">
        <span class="close" onclick="closeWebinarModal()">&times;</span>
        <h3 id="modalTitle">Neues Webinar</h3>
        
        <form id="webinarForm">
          <input type="hidden" id="webinarId">
          
          <div class="form-group">
            <label for="webinarTitle">Titel</label>
            <input type="text" id="webinarTitle" required>
          </div>
          
          <div class="form-group">
            <label for="webinarPptx">Pr√§sentationsdatei (PPTX/PDF, optional)</label>
            <select id="webinarPptx">
              <option value="">Keine Pr√§sentationsdatei</option>
            </select>
          </div>
          
          <h4>Folien</h4>
          <div id="slidesContainer"></div>
          <button type="button" onclick="addSlide()" class="btn btn-secondary">Folie hinzuf√ºgen</button>
          
          <h4>Lernkontrolle-Fragen</h4>
          <div id="questionsContainer"></div>
          <button type="button" onclick="addQuestion()" class="btn btn-secondary">Frage hinzuf√ºgen</button>
          
          <div class="modal-actions">
            <button type="submit" class="btn btn-primary">Speichern</button>
            <button type="button" onclick="closeWebinarModal()" class="btn btn-secondary">Abbrechen</button>
          </div>
        </form>
      </div>
    </div>
  </section>
  
  <!-- Results Section -->
  <section id="results-section" class="content-section hidden">
    <h2>Webinar Ergebnisse</h2>
    
    <div class="card">
      <button onclick="exportResults()" class="btn btn-primary">Als CSV exportieren</button>
      
      <div id="resultsTable"></div>
    </div>
  </section>
  
  <!-- Import Modal -->
  <div id="importModal" class="modal hidden">
    <div class="modal-content">
      <span class="close" onclick="closeImportModal()">&times;</span>
      <h3>üì§ Pr√§sentationen importieren</h3>
      
      <p style="margin-bottom: 20px;">Laden Sie PPTX-Pr√§sentationen oder PDF-Dokumente hoch, um sie als Basis f√ºr Webinar-Slides zu verwenden.</p>
      
      <form id="importForm">
        <div class="form-group">
          <label for="importFiles">Dateien ausw√§hlen (PPTX oder PDF)</label>
          <input type="file" id="importFiles" accept=".pptx,.ppt,.pdf" multiple required>
          <small>Sie k√∂nnen mehrere Dateien gleichzeitig ausw√§hlen</small>
        </div>
        
        <div id="importFilesList" style="margin: 15px 0;"></div>
        
        <div class="modal-actions">
          <button type="submit" class="btn btn-primary">Importieren</button>
          <button type="button" onclick="closeImportModal()" class="btn btn-secondary">Abbrechen</button>
        </div>
      </form>
      
      <hr style="margin: 30px 0;">
      
      <h3>Importierte Pr√§sentationen</h3>
      <div id="importedFilesList"></div>
    </div>
  </div>
  
  <!-- Help Modal -->
  <div id="helpModal" class="modal hidden">
    <div class="modal-content help-modal-content">
      <span class="close" onclick="closeHelpModal()">&times;</span>
      <h2>‚ùì Hilfe - Webinar Platform Admin</h2>
      
      <div class="help-section">
        <h3>üìö √úbersicht</h3>
        <p>Willkommen im Admin-Panel der Webinar Platform! Diese Anleitung erkl√§rt Ihnen Schritt f√ºr Schritt, wie Sie Webinare erstellen, verwalten und PPTX/PDF-Pr√§sentationen importieren k√∂nnen.</p>
      </div>

      <div class="help-section">
        <h3>üéØ Webinar erstellen</h3>
        
        <div class="help-step">
          <strong>Schritt 1: Webinar-Bereich √∂ffnen</strong>
          <p>Klicken Sie in der Navigationsleiste oben auf <code>Webinare</code>.</p>
        </div>

        <div class="help-step">
          <strong>Schritt 2: Neues Webinar erstellen</strong>
          <p>Klicken Sie auf den Button <code>Neues Webinar erstellen</code>. Ein Formular √∂ffnet sich.</p>
        </div>

        <div class="help-step">
          <strong>Schritt 3: Webinar-Titel eingeben</strong>
          <p>Geben Sie einen aussagekr√§ftigen Titel f√ºr Ihr Webinar ein (z.B. "Einf√ºhrung in die Webentwicklung").</p>
        </div>

        <div class="help-step">
          <strong>Schritt 4: Pr√§sentationsdatei ausw√§hlen (optional)</strong>
          <p>Falls Sie bereits eine PPTX- oder PDF-Datei hochgeladen haben, k√∂nnen Sie diese hier ausw√§hlen. Die Folien werden automatisch aus der Pr√§sentation extrahiert.</p>
          <div class="note">
            <strong>üí° Hinweis:</strong> Sie k√∂nnen Webinare auch ohne Pr√§sentationsdatei erstellen und die Folien manuell hinzuf√ºgen.
          </div>
        </div>

        <div class="help-step">
          <strong>Schritt 5: Folien hinzuf√ºgen</strong>
          <p>Klicken Sie auf <code>Folie hinzuf√ºgen</code> und f√ºllen Sie folgende Felder aus:</p>
          <ul>
            <li><strong>Titel:</strong> Der Titel der Folie (wird oben angezeigt)</li>
            <li><strong>Inhalt:</strong> Der Hauptinhalt der Folie (unterst√ºtzt HTML-Formatierung)</li>
            <li><strong>Sprechernotiz:</strong> Text f√ºr die automatische Sprachausgabe (wird nicht auf der Folie angezeigt)</li>
          </ul>
          <div class="tip">
            <strong>üí° Tipp:</strong> Verwenden Sie den Rich-Text-Editor f√ºr formatierte Inhalte mit √úberschriften, Listen, Bildern und Tabellen.
          </div>
        </div>

        <div class="help-step">
          <strong>Schritt 6: Lernkontrolle-Fragen hinzuf√ºgen</strong>
          <p>F√ºgen Sie Quiz-Fragen hinzu, um das Wissen der Teilnehmer zu testen:</p>
          <ol>
            <li>Klicken Sie auf <code>Frage hinzuf√ºgen</code></li>
            <li>Geben Sie die Frage ein</li>
            <li>Geben Sie 4 Antwortm√∂glichkeiten ein</li>
            <li>Markieren Sie die richtige Antwort mit dem Radio-Button</li>
          </ol>
        </div>

        <div class="help-step">
          <strong>Schritt 7: Speichern</strong>
          <p>Klicken Sie auf <code>Speichern</code>, um das Webinar zu erstellen. Es wird automatisch in der Liste angezeigt.</p>
        </div>
      </div>

      <div class="help-section">
        <h3>üì§ PPTX/PDF importieren</h3>
        
        <div class="help-step">
          <strong>Schritt 1: Import-Dialog √∂ffnen</strong>
          <p>Klicken Sie in der Navigationsleiste auf den gr√ºnen Button <code>üì§ Import (PPTX/PDF)</code>.</p>
        </div>

        <div class="help-step">
          <strong>Schritt 2: Dateien ausw√§hlen</strong>
          <p>Klicken Sie auf <code>Dateien ausw√§hlen</code> und w√§hlen Sie eine oder mehrere PPTX- oder PDF-Dateien von Ihrem Computer aus.</p>
          <div class="note">
            <strong>‚úÖ Unterst√ºtzte Formate:</strong>
            <ul>
              <li>PowerPoint-Pr√§sentationen (.pptx, .ppt)</li>
              <li>PDF-Dokumente (.pdf)</li>
            </ul>
          </div>
        </div>

        <div class="help-step">
          <strong>Schritt 3: Importieren</strong>
          <p>Klicken Sie auf <code>Importieren</code>. Die Dateien werden hochgeladen und verarbeitet.</p>
          <div class="warning">
            <strong>‚ö†Ô∏è Wichtig:</strong> Je nach Dateigr√∂√üe kann der Upload einige Sekunden dauern. Bitte warten Sie, bis die Erfolgsmeldung erscheint.
          </div>
        </div>

        <div class="help-step">
          <strong>Schritt 4: Verwendung der importierten Pr√§sentation</strong>
          <p>Die hochgeladene Pr√§sentation erscheint in der Liste. Sie k√∂nnen sie jetzt bei der Webinar-Erstellung ausw√§hlen:</p>
          <ul>
            <li><strong>PDF:</strong> Seiten werden als Bilder extrahiert und automatisch den Folien zugeordnet</li>
            <li><strong>PPTX:</strong> Bilder und Grafiken werden extrahiert und den Folien zugeordnet</li>
          </ul>
        </div>

        <div class="help-step">
          <strong>Pr√§sentationen verwalten</strong>
          <p>Im Import-Dialog sehen Sie alle hochgeladenen Pr√§sentationen. Sie k√∂nnen diese auch l√∂schen, wenn sie nicht mehr ben√∂tigt werden.</p>
        </div>
      </div>

      <div class="help-section">
        <h3>‚úèÔ∏è Webinare bearbeiten und verwalten</h3>
        
        <h4>Webinar bearbeiten</h4>
        <p>Um ein bestehendes Webinar zu bearbeiten:</p>
        <ol>
          <li>Gehen Sie zum Bereich <code>Webinare</code></li>
          <li>Klicken Sie bei dem gew√ºnschten Webinar auf <code>Bearbeiten</code></li>
          <li>Nehmen Sie Ihre √Ñnderungen vor</li>
          <li>Klicken Sie auf <code>Speichern</code></li>
        </ol>

        <h4>Webinar l√∂schen</h4>
        <p>Um ein Webinar zu l√∂schen:</p>
        <ol>
          <li>Gehen Sie zum Bereich <code>Webinare</code></li>
          <li>Klicken Sie bei dem gew√ºnschten Webinar auf <code>L√∂schen</code></li>
          <li>Best√§tigen Sie die L√∂schung</li>
        </ol>
        <div class="warning">
          <strong>‚ö†Ô∏è Achtung:</strong> Gel√∂schte Webinare k√∂nnen nicht wiederhergestellt werden!
        </div>

        <h4>Webinar anzeigen</h4>
        <p>Um ein Webinar in der Teilnehmer-Ansicht zu √∂ffnen:</p>
        <ol>
          <li>Klicken Sie bei dem gew√ºnschten Webinar auf <code>Anzeigen</code></li>
          <li>Das Webinar √∂ffnet sich in einem neuen Tab</li>
        </ol>
      </div>

      <div class="help-section">
        <h3>üìä Ergebnisse verwalten</h3>
        
        <p>Im Bereich <code>Ergebnisse</code> finden Sie alle eingereichten Quiz-Ergebnisse:</p>
        <ul>
          <li><strong>Name:</strong> Name des Teilnehmers</li>
          <li><strong>E-Mail:</strong> E-Mail-Adresse des Teilnehmers</li>
          <li><strong>Webinar:</strong> Name des absolvierten Webinars</li>
          <li><strong>Punktzahl:</strong> Erreichte Punktzahl</li>
          <li><strong>Bestanden:</strong> Status (Bestanden/Nicht bestanden)</li>
          <li><strong>Datum:</strong> Zeitpunkt der Teilnahme</li>
        </ul>

        <h4>CSV-Export</h4>
        <p>Klicken Sie auf <code>Als CSV exportieren</code>, um alle Ergebnisse in einer Excel-kompatiblen Datei zu speichern.</p>
      </div>

      <div class="help-section">
        <h3>‚öôÔ∏è Einstellungen</h3>
        
        <h4>Header-Konfiguration</h4>
        <p>Passen Sie das Erscheinungsbild der Webinar-Plattform an:</p>
        <ul>
          <li><strong>Header-Titel:</strong> √Ñndern Sie den Titel, der auf allen Seiten angezeigt wird</li>
          <li><strong>Logo:</strong> Laden Sie Ihr eigenes Logo hoch (PNG, JPG, SVG)</li>
        </ul>

        <h4>E-Mail-Konfiguration (SMTP)</h4>
        <p>Richten Sie den E-Mail-Versand ein, um automatisch Ergebnisse zu versenden:</p>
        <ol>
          <li>Gehen Sie zum Bereich <code>E-Mail (SMTP)</code></li>
          <li>Geben Sie Ihre SMTP-Server-Details ein</li>
          <li>Testen Sie die Konfiguration mit einer Test-E-Mail</li>
          <li>Speichern Sie die Einstellungen</li>
        </ol>
        <div class="tip">
          <strong>üí° Tipp:</strong> F√ºr Gmail verwenden Sie <code>smtp.gmail.com</code> auf Port <code>587</code> und ein App-spezifisches Passwort.
        </div>
      </div>

      <div class="help-section">
        <h3>üó£Ô∏è Sprachausgabe</h3>
        
        <p>Die Webinar-Plattform bietet automatische Sprachausgabe f√ºr Sprechernotizen:</p>
        <ul>
          <li>Geben Sie bei jeder Folie eine <strong>Sprechernotiz</strong> ein</li>
          <li>Diese wird automatisch vorgelesen, wenn die Folie angezeigt wird</li>
          <li>Teilnehmer k√∂nnen die Stimme und Geschwindigkeit anpassen</li>
          <li>Verwenden Sie vollst√§ndige S√§tze mit korrekter Interpunktion f√ºr beste Ergebnisse</li>
        </ul>
      </div>

      <div class="help-section">
        <h3>üí° Tipps & Best Practices</h3>
        
        <ul>
          <li><strong>Kurze Folien:</strong> Halten Sie Folien √ºbersichtlich mit 3-5 Hauptpunkten</li>
          <li><strong>Klare Struktur:</strong> Verwenden Sie √úberschriften und Aufz√§hlungen</li>
          <li><strong>Bilder verwenden:</strong> Nutzen Sie den Rich-Text-Editor, um Bilder einzuf√ºgen</li>
          <li><strong>Quiz-Fragen:</strong> F√ºgen Sie 3-5 Fragen pro Webinar hinzu</li>
          <li><strong>Sprechernotizen:</strong> Schreiben Sie 2-4 S√§tze pro Folie f√ºr die Sprachausgabe</li>
          <li><strong>Regelm√§√üig speichern:</strong> Speichern Sie Ihre √Ñnderungen regelm√§√üig</li>
          <li><strong>Vorschau nutzen:</strong> Testen Sie Ihr Webinar mit "Anzeigen" vor der Ver√∂ffentlichung</li>
        </ul>
      </div>

      <div class="help-section">
        <h3>‚ùì H√§ufige Fragen</h3>
        
        <h4>Kann ich vorhandene PowerPoint-Pr√§sentationen verwenden?</h4>
        <p>Ja! Laden Sie Ihre PPTX- oder PDF-Datei √ºber <code>üì§ Import (PPTX/PDF)</code> hoch. Die Folien werden automatisch extrahiert und k√∂nnen als Basis f√ºr Ihr Webinar verwendet werden.</p>

        <h4>Wie viele Folien kann ein Webinar haben?</h4>
        <p>Es gibt keine technische Begrenzung. F√ºr beste Lernergebnisse empfehlen wir 10-20 Folien pro Webinar.</p>

        <h4>Kann ich HTML in den Folien verwenden?</h4>
        <p>Ja! Der Rich-Text-Editor unterst√ºtzt HTML-Formatierung. Sie k√∂nnen auch direkt HTML-Code einf√ºgen.</p>

        <h4>Werden die Ergebnisse automatisch per E-Mail versendet?</h4>
        <p>Ja, wenn Sie SMTP konfiguriert haben, werden die Ergebnisse automatisch an die konfigurierte Empf√§nger-Adresse gesendet.</p>

        <h4>Kann ich ein Webinar nachtr√§glich bearbeiten?</h4>
        <p>Ja, jederzeit! Klicken Sie einfach auf <code>Bearbeiten</code> beim entsprechenden Webinar.</p>
      </div>

      <div class="help-section">
        <h3>üÜò Support</h3>
        <p>Bei weiteren Fragen oder Problemen:</p>
        <ul>
          <li>GitHub Issues: <a href="https://github.com/TimUx/fw-webminar/issues" target="_blank">https://github.com/TimUx/fw-webminar/issues</a></li>
          <li>Dokumentation: README.md im Projektverzeichnis</li>
        </ul>
      </div>

      <div class="modal-actions">
        <button type="button" onclick="closeHelpModal()" class="btn btn-primary">Schlie√üen</button>
      </div>
    </div>
  </div>

  <div id="notification" class="notification hidden"></div>
  
  <!-- Load TipTap bundled dependencies first -->
  <script src="/assets/lib/tiptap/tiptap-bundled.js"></script>
  <!-- Load TipTap editor wrapper -->
  <script src="/assets/lib/tiptap/tiptap-bundle.js"></script>
  <script src="/assets/js/admin.js?v=1768678035"></script>
</body>
</html>
